(in-package :dense-numericals.impl)

(define-constant dn:+optimized-types+
    '(single-float double-float)
  :test #'equal)

;; FIXME: This should be in DENSE-ARRAYS itself?
(define-condition incompatible-broadcast-dimensions (error)
  ((dimensions :initarg :dimensions :reader condition-dimensions)
   (array-likes :initarg :array-likes :reader condition-array-likes))
  (:report (lambda (c s)
             (pprint-logical-block (s nil)
               (format s "The following array-likes with dimensions誉ャ犷铒忮怛镝溷狍麸珏翳弪湖アㄣ镱溟糸镱溟礤铙轱铙悌痧蜷铘祜玳汜飙忪镢铋吼弪扉铄痱彐轼ㄦ矧磲英ㄣ镱溟糸镱狎蜥扉脲悌┅┅┅换韵南龄泔眇殪弪磲泸矬骘翳轶ㄤ彐躅铒蝽犰辁瀛狎珲礤铘蟑漤狍ㄡ蝌狴扉脲秕舂ㄩㄥ鲥蝙＇铛礅弪狎蜥扉脲螬鲠祯弩狎蜥扉脲秕舂戾è狎蜥祜镳烘矧狎蜥扉脲猴狎蜥扉脲轰箦翩ㄦ轵篝狎蜥扉脲ㄥ铙躜瀛狃痱镳蜷狒瀛溴铙瀛狎蜥ㄦ轵篝狎蜥扉脲┅烘轭犰禊蝈趱蝾狎蜥扉脲螬┅眭祠轲戾鲠祯瀛忾钿ㄢ蝻徜汜篝泔眇狒殁戾溟礤铙轱铙ㄩ秕ㄡ痧禊＇怛镝溷狍舡泔眇狒殁戾秕狎蜥螬ㄡ痧禊＇怛镝溷狍舡泔眇狒殁戾狎蜥螬ㄩ怛镝溷狍舡泔眇狒殁戾鲠祯弩ㄡ痧禊＇怛镝溷狍舡狎蜥狎蜥螬矧秕弪矬溟礤铙轱铙┅ㄥ蝌矧ч钽镯疳糸忪瀛怛镝溷狍舡溟礤铙轱铙横蝌狴扉脲狎蜥扉脲轰轫孱箝镱磲疸狎＇溟礤铙轱铙狎蜥扉脲螬┅┅┅换澡弩骢钽糸镱汜铑雉栳鲥眭汨忮铄骈趔镦泔眇殪弪磲泸换躅糸轸忮泔礤痫篌殁戾麸翦祆翳狎蜥溟礤铙轱铙狒泔眇殪糸礤换韵南澡轭徕秕豉疱铒蝽犰辁狒轱犷躔珧徜狒轱犷泔眇殪弪磲泸磲泸镬弭è溴钺礤蝈漉沐骖轭轸獒飙鲠祯濠啜溴骢钺礤é蝈篝狎珞ㄤ弩趄蹉趱蜷铉忾钿ㄡ蝌狴扉脲脲秕舂箴扉舡狒脲黠蜾狎珞换韵南深泔蝠矧狒兹乓咯眭祠轲戾鲠祯瀛忾钿ㄡ蝌狴扉脲秕舂铒蝽犰辁瀛狎珲礤铘蟑漤狍狎蜥扉脲秕舂ㄩ秕痱镧ㄣ镱è铛祆狎蜥扉脲螬ì蝈漉沐骖轭轸獒飙鲠祯秕猴豸秕舂è铛祆ㄣ潋狎蜥扉脲螬ì蝈漉沐骖轭轸獒飙鲠祯ㄦ轵篝狎蜥扉脲螬猴豸秕舂ì蝈漉沐骖ㄦ轵篝狎蜥扉脲螬箦泔钿狎蜥扉脲螬猴豸秕舂祜镳烘矧狎蜥扉脲洪ㄣ滗狎蜥扉脲螬轰ì蝈漉沐骖秕狎蜥扉脲猴豸秕舂┅秕舂ㄩ蝈篝狎蜥扉脲螬蝈漉沐＇ㄣ飙钺礤蝈漉沐骖蝈篝狎蜥扉脲螬洪铋糸犰鲠祯ㄦ轵篝狎蜥扉脲螬ㄦ躅汜祆＇ㄣ飙钺礤蝈漉沐骖ㄦ轵篝狎蜥扉脲螬┅┅┅┅ㄤ彐漕韩漕呼黠狎绛癌ㄤ彐漕涵漕呼黠狎绛癌ㄤ彐漕邯漕呼黠狎绛暴ㄤ彐漕函漕呼黠狎绛暴ㄤ彐躅铒蝽犰辁瀛狎珲礤铘蟑沩ㄡ蝌狴扉脲秕舂ㄩㄥ鲥蝙＇铛礅弪狎蜥扉脲螬鲠祯弩狎蜥扉脲秕舂戾è狎蜥祜镳烘矧狎蜥扉脲猴狎蜥扉脲轰箦翩ㄦ轵篝狎蜥扉脲ㄥ铙躜瀛狃痱镳蜷狒瀛溴铙瀛狎蜥ㄦ轵篝狎蜥扉脲┅烘轭犰禊蝈趱蝾狎蜥扉脲螬┅眭祠轲戾鲠祯瀛忾钿ㄢ蝻徜汜篝泔眇狒殁戾溟礤铙轱铙ㄩ秕ㄡ痧禊＇怛镝溷狍舡泔眇狒殁戾秕狎蜥螬ㄡ痧禊＇怛镝溷狍舡泔眇狒殁戾狎蜥螬ㄩ怛镝溷狍舡泔眇狒殁戾鲠祯弩ㄡ痧禊＇怛镝溷狍舡狎蜥狎蜥螬矧秕弪矬溟礤铙轱铙呼疱Ж躅箝珙邃怡翦俯┅ㄥ蝌矧ч钽镯疳糸忪瀛怛镝溷狍舡溟礤铙轱铙横蝌狴扉脲狎蜥扉脲轰轫孱箝镱磲疸狎＇溟礤铙轱铙狎蜥扉脲螬┅┅┅磲泸镬弭è溴钺礤蝈漉沐骖啜溴骈铄箴扉沐扉篝骖钺礤ㄡ蝌狴扉脲脲秕舂换韵南深泔蝠矧狒兹乓咯眭祠轲戾鲠祯瀛忾钿ㄡ蝌狴扉脲秕舂铒蝽犰辁瀛狎珲礤铘蟑沩狎蜥扉脲秕舂蝈漉沐灬礅溽镬洵秕铄鳝鲠祯濠ì蝈漉沐骖镬洵秕铄鳝鲠祯猴豸秕舂蝈篝狎蜥扉脲螬洪铋糸犰鲠祯ㄦ轵篝狎蜥扉脲螬┅┅ㄤ彐漕杭漕呼黠狎绛缉ㄤ彐漕杭漕呼黠狎绛冀ㄤ彐漕航漕呼黠狎绛僵ㄤ彐漕函漕呼黠狎绛僵ㄤ彐漕壕漕呼黠狎绛京ㄤ彐漕壕漕呼黠狎绛窘┅